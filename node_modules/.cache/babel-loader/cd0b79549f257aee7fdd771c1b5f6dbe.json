{"ast":null,"code":"export class OrderLine {\n  constructor(product, quantity) {// no statements required\n\n    this.product = product;\n    this.quantity = quantity;\n  }\n\n  get total() {\n    return this.product.price * this.quantity;\n  }\n\n}\nexport class Order {\n  constructor(initialLines) {\n    this.lines = new Map();\n\n    if (initialLines) {\n      initialLines.forEach(ol => this.lines.set(ol.product.id, ol));\n    }\n  }\n\n  addProduct(prod, quantity) {\n    if (this.lines.has(prod.id)) {\n      if (quantity === 0) {\n        this.removeProduct(prod.id);\n      } else {\n        this.lines.get(prod.id).quantity += quantity;\n      }\n    } else {\n      this.lines.set(prod.id, new OrderLine(prod, quantity));\n    }\n  }\n\n  removeProduct(id) {\n    this.lines.delete(id);\n  }\n\n  get orderLines() {\n    return [...this.lines.values()];\n  }\n\n  get productCount() {\n    return [...this.lines.values()].reduce((total, ol) => total += ol.quantity, 0);\n  }\n\n  get total() {\n    return [...this.lines.values()].reduce((total, ol) => total += ol.total, 0);\n  }\n\n}","map":{"version":3,"sources":["/Users/matthewhill/Downloads/essential-typescript-master/20 - React Web App -2/reactapp/src/data/entities.ts"],"names":["OrderLine","constructor","product","quantity","total","price","Order","initialLines","lines","Map","forEach","ol","set","id","addProduct","prod","has","removeProduct","get","delete","orderLines","values","productCount","reduce"],"mappings":"AAQA,OAAO,MAAMA,SAAN,CAAgB;AACnBC,EAAAA,WAAW,CAAQC,OAAR,EAAiCC,QAAjC,EAAmD,CAC1D;;AAD0D,SAA3CD,OAA2C,GAA3CA,OAA2C;AAAA,SAAlBC,QAAkB,GAAlBA,QAAkB;AAE7D;;AAEQ,MAALC,KAAK,GAAW;AAChB,WAAO,KAAKF,OAAL,CAAaG,KAAb,GAAqB,KAAKF,QAAjC;AACH;;AAPkB;AAUvB,OAAO,MAAMG,KAAN,CAAY;AAGfL,EAAAA,WAAW,CAACM,YAAD,EAA6B;AAAA,SAFhCC,KAEgC,GAFxB,IAAIC,GAAJ,EAEwB;;AACpC,QAAIF,YAAJ,EAAkB;AACdA,MAAAA,YAAY,CAACG,OAAb,CAAqBC,EAAE,IAAI,KAAKH,KAAL,CAAWI,GAAX,CAAeD,EAAE,CAACT,OAAH,CAAWW,EAA1B,EAA8BF,EAA9B,CAA3B;AACH;AACJ;;AAEMG,EAAAA,UAAU,CAACC,IAAD,EAAgBZ,QAAhB,EAAkC;AAC/C,QAAI,KAAKK,KAAL,CAAWQ,GAAX,CAAeD,IAAI,CAACF,EAApB,CAAJ,EAA6B;AACzB,UAAIV,QAAQ,KAAK,CAAjB,EAAoB;AAChB,aAAKc,aAAL,CAAmBF,IAAI,CAACF,EAAxB;AACH,OAFD,MAEO;AACH,aAAKL,KAAL,CAAWU,GAAX,CAAeH,IAAI,CAACF,EAApB,EAAyBV,QAAzB,IAAqCA,QAArC;AACH;AACJ,KAND,MAMO;AACH,WAAKK,KAAL,CAAWI,GAAX,CAAeG,IAAI,CAACF,EAApB,EAAwB,IAAIb,SAAJ,CAAce,IAAd,EAAoBZ,QAApB,CAAxB;AACH;AACJ;;AAEMc,EAAAA,aAAa,CAACJ,EAAD,EAAa;AAC7B,SAAKL,KAAL,CAAWW,MAAX,CAAkBN,EAAlB;AACH;;AAEa,MAAVO,UAAU,GAAgB;AAC1B,WAAO,CAAC,GAAG,KAAKZ,KAAL,CAAWa,MAAX,EAAJ,CAAP;AACH;;AAEe,MAAZC,YAAY,GAAW;AACvB,WAAO,CAAC,GAAG,KAAKd,KAAL,CAAWa,MAAX,EAAJ,EACFE,MADE,CACK,CAACnB,KAAD,EAAQO,EAAR,KAAeP,KAAK,IAAIO,EAAE,CAACR,QADhC,EAC0C,CAD1C,CAAP;AAEH;;AAEQ,MAALC,KAAK,GAAW;AAChB,WAAO,CAAC,GAAG,KAAKI,KAAL,CAAWa,MAAX,EAAJ,EAAyBE,MAAzB,CAAgC,CAACnB,KAAD,EAAQO,EAAR,KAAeP,KAAK,IAAIO,EAAE,CAACP,KAA3D,EAAkE,CAAlE,CAAP;AACH;;AApCc","sourcesContent":["export type Product = {\n    id: number, \n    name: string,\n    description: string,\n    category: string, \n    price: number \n};\n\nexport class OrderLine {\n    constructor(public product: Product, public quantity: number) {\n        // no statements required\n    }\n\n    get total(): number {\n        return this.product.price * this.quantity;\n    }\n}\n\nexport class Order {\n    private lines = new Map<number, OrderLine>();\n\n    constructor(initialLines?: OrderLine[]) {\n        if (initialLines) {\n            initialLines.forEach(ol => this.lines.set(ol.product.id, ol));\n        }\n    }\n\n    public addProduct(prod: Product, quantity: number) {\n        if (this.lines.has(prod.id)) {\n            if (quantity === 0) {\n                this.removeProduct(prod.id);\n            } else {\n                this.lines.get(prod.id)!.quantity += quantity;\n            }\n        } else {\n            this.lines.set(prod.id, new OrderLine(prod, quantity));\n        }\n    }\n\n    public removeProduct(id: number) {\n        this.lines.delete(id);\n    }\n\n    get orderLines(): OrderLine[] {\n        return [...this.lines.values()];\n    }\n\n    get productCount(): number {\n        return [...this.lines.values()]\n            .reduce((total, ol) => total += ol.quantity, 0);\n    }\n\n    get total(): number {\n        return [...this.lines.values()].reduce((total, ol) => total += ol.total, 0);\n    }\n}\n"]},"metadata":{},"sourceType":"module"}